#: import Checkbox kivy.uix.checkbox
#: import webbrowser webbrowser
#: import HoverBehavior HoverBehavior

<SelectableLabel>:
    # bg color
    canvas.before:
        Color:
            rgba: (.0, 0.9, .1, .3) if self.selected else (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<LinkLabel@ButtonBehavior+Label>:
    on_release: webbrowser.open(self.text)

<Row@BoxLayout>:
    canvas.before:
        Color:
            rgba: 0.3, 0.3, 0.3, 1
        Rectangle:
            size: self.size
            pos: self.pos
    name: ''
    link: ''
    description: ''
    BoxLayout:
        orientation:'vertical'
        padding:10,5,5,5
        canvas.before:
            Color:
                rgba: 0.9, 0.9, 0.9, 1
            Rectangle:
                size: self.size
                pos: self.pos
        GridLayout:
            rows:2
            Label:
                text_size: self.size
                halign:'left'
                valign:'top'
                size_hint_y:None
                text: root.name
                height:20
                color: .1,.1,.7,1

            Label:
                text_size: self.size
                bold: True
                halign:'right'
                valign:'top'
                size_hint_y:None
                text: 'UPDATED' if root.was_updated else ''
                height:20
                color: 1,0,0,1

        LinkLabel:
            text_size: self.size
            halign:'left'
            valign:'top'
            size_hint_y:None
            text: root.link
            height:20
            color: (.1,.7,.1,1)

        Label:
            text_size: self.size
            halign:'left'
            valign:'top'
            size_hint_y:None
            text: root.description
            height:60
            color: .1,.1,.1,1





<TabbedLayout>:
    do_default_tab: False

    TabbedPanelItem:
        text: 'Main'
        BoxLayout:
            BoxLayout:
                size_hint_x: None
                width: 250
                orientation:"vertical"
                BoxLayout:
                    spacing: 10
                    padding: 10
                    orientation:"horizontal"
                    size_hint_y: None
                    height: 50

                    TextInput:
                        id: field_input
                        hint_text: 'Enter keyword here.'
                        multiline: False
                        on_text_validate: root.addField(self.text)
                    Button:
                        text: 'Add Keyword'
                        size_hint_x: None
                        width: 100
                        on_press: root.addField(field_input.text)
                Label:
                    id: results_label
                    text: '    Keywords: '
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'
                    size_hint_y:  None
                    height: 40
                RecycleView:
                    id: fields
                    canvas.before:
                        Color:
                            rgba: 0.5, 0.5, 0.5, 1
                        Rectangle:
                            size: self.size
                            pos: self.pos
                    viewclass: 'SelectableLabel'
                    SelectableRecycleBoxLayout:
                        default_size: None, dp(56)
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'vertical'
                        spacing: dp(2)
                        multiselect: True
                        touch_multiselect: True
            BoxLayout:
                orientation: 'vertical'
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: 92
                    Button:
                        text: 'Remove Keyword'
                        on_press: root.removeField()
                    Button:
                        text: 'Results'
                        on_press: if [d['text'] for d in root.ids.fields.data if d['selected'] == True]: root.google_thread(), root.switch_to(results_tab)
                        #on_press:
                Button:
                    text: 'print'
                    on_press: root.thread_id_pr()
                Label:
                    text: 'Empty Space'
    TabbedPanelItem:
        id: results_tab
        text: 'Results'
        BoxLayout:
            BoxLayout:
                id: results_sidebar
                size_hint_x: None
                width: 250
                orientation:"vertical"
                canvas.before:
                    Color:
                        rgba: 0.5, 0.5, 0.5, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
            GoogleResultRow:
                id: google_result_row
                size_hint_x: results_sidebar.width
                orientation: 'vertical'
                rv:rv

                GridLayout:
                    cols: 3
                    size_hint_y: None
                    height: dp(48)
                    padding: dp(8)
                    spacing: dp(16)
                    Button:
                        text: 'List Results'
                        on_press: google_result_row.list_results()
                    Button:
                        text: 'Float Updated'
                RecycleView:
                    id: rv
                    scroll_type: ['bars']
                    scroll_wheel_distance: dp(114)
                    bar_width: dp(10)
                    viewclass: 'Row'
                    RecycleBoxLayout:
                        default_size: None, 110
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'vertical'
                        spacing: dp(2)
